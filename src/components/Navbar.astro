---
import Image from "astro/components/Image.astro";
import Logo from "../components/Logo.astro";
import Button from "./Button.astro";
---

<!-- adding a class nav-open that will be targeted with Javascript to open the element based on user click We remove it by default, but will be added to javascript-->
<header class="header">
  <div class="nav__logo-wrapper">
    <Logo variant="navbar" />
  </div>
  <nav class="navbar">
    <ul class="nav-list">
      <li><a class="nav-link" href="/about">About</a></li>
      <li><a class="nav-link" href="/pricing">Pricing</a></li>
      <li><a class="nav-link" href="/contact">Contact</a></li>
      <li><Button href="/contact">Request a Demo</Button></li>
    </ul>
  </nav>
  <button class="btn-mobile-nav">
    <ion-icon class="icon-mobile-nav" name="menu-outline"></ion-icon>
    <ion-icon class="icon-mobile-nav" name="close-outline"></ion-icon>
  </button>
</header>

<script>
  // Make mobile navigation work
  const btnNavEl = document.querySelector(".btn-mobile-nav");
  const headerEl = document.querySelector(".header");

  if (btnNavEl && headerEl) {
    btnNavEl.addEventListener("click", function () {
      headerEl.classList.toggle("nav-open");
    });
  }
</script>

<!-- Ionicons and smoothscroll-polyfill scripts -->
<script
  defer
  type="module"
  src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script
  defer
  nomodule
  src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
<script
  defer
  src="https://unpkg.com/smoothscroll-polyfill@0.4.4/dist/smoothscroll.min.js"
></script>

<style>
  /*============================= 
 HEADER
 =============================*/
  .header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    /* background-color: var(--color-neutral-darkest); */
    background-color: transparent;
    /* height: 6rem; Fixed height to allow for sticky positioning */
    padding: 0 4.8rem;
    position: relative;
    z-index: 1;
  }

  .nav__logo-wrapper {
    max-width: 10rem;
    transition: opacity ease 0.3;
  }

  .nav__logo-wrapper:hover {
    opacity: 0.85;
  }

  /*============================= 
 MAIN NAVIGATION
 =============================*/
  /* Main navigation list container */
  .nav-list {
    list-style: none;
    display: flex;
    align-items: center;
    gap: 3rem;
  }

  /* Navigation link styles - base state */
  .nav-link:link,
  .nav-link:visited {
    display: inline-block;
    text-decoration: none;
    color: var(--theme-text-dark);
    font-weight: 500;
    font-size: 1rem;
    transition: opacity ease 0.3s;
  }

  /* Navigation link styles - hover/active state */
  .nav-link:hover,
  .nav-link:active {
    opacity: 0.7;
  }

  /* Call-to-action button in navigation */
  .nav-link.nav-cta:link,
  .nav-link.nav-cta:visited {
    padding: 1rem 2rem;
    border-radius: 9px;
    color: #fff;
    background-color: var(--color-neutral-darkest);
  }

  .nav-link.nav-cta:hover,
  .nav-link.nav-cta:active {
    background-color: var(--color-neutral-darker);
  }

  /*============================= 
 MOBILE NAVIGATION
 =============================*/
  /* Mobile navigation button - always visible on mobile, hidden on desktop */
  .btn-mobile-nav {
    background: none;
    border: none;
    outline: none;
    box-shadow: none;
    -webkit-tap-highlight-color: transparent; /* Removes tap highlight on iOS */
    cursor: pointer;
    display: none; /* Hidden by default, shown on mobile */
    z-index: 10000;
  }

  /* Icon styles for mobile navigation */
  .icon-mobile-nav {
    height: 2rem;
    width: 2rem;
    color: var(--theme-text-dark);
  }

  /* Hide the close icon by default */
  .icon-mobile-nav[name="close-outline"] {
    display: none;
  }

  /* Show the menu icon by default */
  .icon-mobile-nav[name="menu-outline"] {
    display: block;
  }

  /* When nav is open, show the close icon */
  .nav-open .icon-mobile-nav[name="close-outline"] {
    display: block;
  }

  /* When nav is open, hide the menu icon */
  .nav-open .icon-mobile-nav[name="menu-outline"] {
    display: none;
  }

  /*============================= 
 STICKY NAVIGATION
 =============================*/
  /* Applies styles when the header is sticky */
  .sticky .header {
    position: fixed;
    top: 0;
    bottom: 0;
    width: 100%;
    height: 8rem;
    padding-top: 0;
    padding-bottom: 0;
    background-color: rgba(255, 255, 255, 0.971);
    z-index: 999;
    box-shadow: 0 0.85rem 2rem rgba(0, 0, 0, 0.03);
  }

  /* Adds margin to the hero section when header is sticky to prevent content overlap */
  .sticky .section-hero {
    margin-top: 6rem;
  }

  /*============================= 
 MEDIA QUERIES
 =============================*/
  /* BELOW 1200PX (Landscape Tablets) */
  @media (max-width: 75em) {
    .header {
      padding: 0 2rem;
    }

    .nav-list {
      gap: 1.5rem;
    }
  }

  /* BELOW 944PX (Tablets) */
  @media (max-width: 59em) {
    /* Show mobile navigation button */
    .btn-mobile-nav {
      display: block;
    }

    /* Mobile navigation container */
    .navbar {
      background-color: var(--theme-bg-light);
      -webkit-backdrop-filter: blur(10px);
      backdrop-filter: blur(5px);
      position: absolute;
      top: 100%;
      left: 0;
      width: 100%;
      height: 0;
      overflow: hidden;

      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;

      /* Transition for smooth opening/closing */
      transition: all 0.3s ease-in-out;
      opacity: 0;
      pointer-events: none;
      visibility: hidden;
      z-index: 999;
    }

    /* When navigation is open */
    .nav-open .navbar {
      height: 100vh;
      opacity: 1;
      pointer-events: auto;
      visibility: visible;
    }

    /* Adjust navigation list for mobile */
    .nav-list {
      flex-direction: column;
      gap: 1.5rem;
      padding-top: 2rem;
    }

    /* Adjust navigation links for mobile */
    .nav-link:link,
    .nav-link:visited {
      font-size: 1rem;
    }
  }
</style>
